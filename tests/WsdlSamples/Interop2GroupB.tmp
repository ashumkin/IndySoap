Unit Interop2GroupB;

{---------------------------------------------------------------------------
This file generated by the IndySoap WSDL -> Pascal translator

Source:   file://WsdlSamples\Interop2GroupB.wsdl
Date:     14/08/2013 8:44:19 AM
IndySoap: V2.00-000
---------------------------------------------------------------------------}

Interface

Uses
  IdSoapClient,
  IdSoapRpcPacket,
  IdSoapTypeRegistry;

Type

  SOAPArrayStruct = class;
  SOAPStructStruct = class;
  SOAPStruct = class;

  ArrayOfString = array of string;
  ArrayOfString2 = array of string;

  SOAPArrayStruct = class (TIdBaseSoapableClass)
  Private
    FvarString : string;
    FvarInt : Integer;
    FvarFloat : Single;
    FvarArray : ArrayOfString;
  Public
    destructor Destroy; override;
    property varArray : ArrayOfString read FvarArray write FvarArray;
  Published
    property varString : string read FvarString write FvarString;
    property varInt : Integer read FvarInt write FvarInt;
    property varFloat : Single read FvarFloat write FvarFloat;
  end;

  SOAPStructStruct = class (TIdBaseSoapableClass)
  Private
    FvarString : string;
    FvarInt : Integer;
    FvarFloat : Single;
    FvarStruct : SOAPStruct;
  Published
    property varString : string read FvarString write FvarString;
    property varInt : Integer read FvarInt write FvarInt;
    property varFloat : Single read FvarFloat write FvarFloat;
    property varStruct : SOAPStruct read FvarStruct write FvarStruct;
  end;

  SOAPStruct = class (TIdBaseSoapableClass)
  Private
    FvarString : string;
    FvarInt : Integer;
    FvarFloat : Single;
  Published
    property varString : string read FvarString write FvarString;
    property varInt : Integer read FvarInt write FvarInt;
    property varFloat : Single read FvarFloat write FvarFloat;
  end;


{!
  Type: ArrayOfString = in http://soapinterop.org/xsd;
  Type: SOAPArrayStruct = in http://soapinterop.org/xsd;
  Type: SOAPStruct = in http://soapinterop.org/xsd;
  Type: SOAPStructStruct = in http://soapinterop.org/xsd;
}

type
  {Soap Address for this Interface: http://www.mssoapinterop.org:80/Remoting/ServiceB.soap}
  InteropServiceB = Interface (IIdSoapInterface) ['{E8A5CCB4-0CD0-4E38-8BC0-1A3BA65847EB}']
       {!Namespace: http://soapinterop.org/;
         SoapAction: http://soapinterop.org/}
    function  echoSimpleTypesAsStruct(inputString : string; inputInteger : Integer; inputFloat : Single) : SOAPStruct; stdcall;
      {!Request: echoSimpleTypesAsStruct; }
    function  echo2DStringArray(input2DStringArray : ArrayOfString2) : ArrayOfString2; stdcall;
      {!Request: echo2DStringArray; }
    function  echoNestedStruct(inputStruct : SOAPStructStruct) : SOAPStructStruct; stdcall;
      {!Request: echoNestedStruct; }
    function  echoNestedArray(inputStruct : SOAPArrayStruct) : SOAPArrayStruct; stdcall;
      {!Request: echoNestedArray; }
    procedure echoStructAsSimpleTypes(inputStruct : SOAPStruct; out outputString : string; out outputInteger : Integer; out outputFloat : Single); stdcall;
      {!Request: echoStructAsSimpleTypes; }
  end;

function GetInteropServiceB(AClient : TIdSoapBaseSender; ASetUrl : Boolean = true) : InteropServiceB;

Implementation

Uses
  IdSoapRTTIHelpers,
  IdSoapUtilities,
  SysUtils;

{ SOAPArrayStruct }

destructor SOAPArrayStruct.destroy;
begin
  IdSoapFreeAndNilArray(pointer(FvarArray), TypeInfo(ArrayOfString));
  inherited;
end;


function GetInteropServiceB(AClient : TIdSoapBaseSender; ASetUrl : Boolean = true) : InteropServiceB;
begin
  if ASetURL and (AClient is TIdSoapWebClient) then
    begin
    (AClient as TIdSoapWebClient).SoapURL := 'http://www.mssoapinterop.org:80/Remoting/ServiceB.soap';
    end;
  result := IdSoapD4Interface(AClient) as InteropServiceB;
end;

Initialization
  IdSoapRegisterType(TypeInfo(ArrayOfString), '', TypeInfo(string));
  IdSoapRegisterType(TypeInfo(SOAPArrayStruct));
  IdSoapRegisterProperty('SOAPArrayStruct', 'varArray',
                   IdSoapFieldProp(@SOAPArrayStruct(nil).FvarArray),
                   IdSoapFieldProp(@SOAPArrayStruct(nil).FvarArray),
                   TypeInfo(ArrayOfString));
  IdSoapRegisterType(TypeInfo(SOAPStructStruct));
  IdSoapRegisterType(TypeInfo(ArrayOfString2), '', TypeInfo(string));
  IdSoapRegisterType(TypeInfo(SOAPStruct));
End.
